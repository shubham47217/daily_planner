<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Day Planner</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: black;
      color: white;
      text-align: center;
      padding: 20px;
    }
    h1 {
      color: #00ffcc;
    }
    .task {
      background-color: #1a1a1a;
      padding: 15px;
      margin: 15px auto;
      border-radius: 12px;
      width: 90%;
      max-width: 400px;
      box-shadow: 0 0 10px #00ffcc;
    }
    input, button {
      margin: 5px;
      padding: 8px;
      border-radius: 8px;
      border: none;
    }
    button {
      cursor: pointer;
      font-weight: bold;
    }
    .start-btn { background-color: #4CAF50; color: white; }
    .pause-btn { background-color: orange; color: white; }
    .reset-btn { background-color: #f44336; color: white; }
    .delete-btn { background-color: #ff0066; color: white; }
    .edit-btn { background-color: #008CBA; color: white; }
  </style>
</head>
<body>

  <h1>üïí Day Planner</h1>

  <input type="text" id="taskName" placeholder="Task name">
  <input type="number" id="taskTime" placeholder="Minutes">
  <button onclick="addTask()">Add Task</button>

  <div id="taskList"></div>

  <audio id="alarmSound" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" preload="auto"></audio>

  <script>
    let tasks = [];

    function addTask() {
      const name = document.getElementById("taskName").value;
      const minutes = parseInt(document.getElementById("taskTime").value);

      if (!name || isNaN(minutes) || minutes <= 0) {
        alert("Enter valid task and time!");
        return;
      }

      const task = {
        id: Date.now(),
        name,
        duration: minutes * 60,
        remaining: minutes * 60,
        elapsed: 0,
        running: false,
        interval: null
      };

      tasks.push(task);
      renderTasks();
      document.getElementById("taskName").value = "";
      document.getElementById("taskTime").value = "";
    }

    function renderTasks() {
      const taskList = document.getElementById("taskList");
      taskList.innerHTML = "";

      tasks.forEach(task => {
        const div = document.createElement("div");
        div.className = "task";

        const remainingMins = Math.floor(task.remaining / 60);
        const remainingSecs = task.remaining % 60;
        const elapsedMins = Math.floor(task.elapsed / 60);
        const elapsedSecs = task.elapsed % 60;

        div.innerHTML = `
          <h3>${task.name}</h3>
          <p>‚è≥ Remaining: ${remainingMins}:${remainingSecs.toString().padStart(2,'0')}</p>
          <p>‚è±Ô∏è Elapsed: ${elapsedMins}:${elapsedSecs.toString().padStart(2,'0')}</p>
          <p>‚åõ Limit: ${Math.floor(task.duration / 60)} min</p>
          <button class="start-btn" onclick="startTask(${task.id})">Start</button>
          <button class="pause-btn" onclick="pauseTask(${task.id})">Pause</button>
          <button class="reset-btn" onclick="resetTask(${task.id})">Reset</button>
          <button class="edit-btn" onclick="editTask(${task.id})">Edit</button>
          <button class="delete-btn" onclick="deleteTask(${task.id})">Delete</button>
        `;

        taskList.appendChild(div);
      });
    }

    function startTask(id) {
      const task = tasks.find(t => t.id === id);
      if (!task || task.running) return;

      task.running = true;
      task.interval = setInterval(() => {
        if (task.remaining > 0) {
          task.remaining--;
          task.elapsed++;
        } else {
          clearInterval(task.interval);
          task.running = false;
          document.getElementById("alarmSound").play();
          alert(`‚è∞ Task "${task.name}" is over!`);
        }
        renderTasks();
      }, 1000);
    }

    function pauseTask(id) {
      const task = tasks.find(t => t.id === id);
      if (task && task.running) {
        clearInterval(task.interval);
        task.running = false;
        renderTasks();
      }
    }

    function resetTask(id) {
      const task = tasks.find(t => t.id === id);
      if (task) {
        clearInterval(task.interval);
        task.remaining = task.duration;
        task.elapsed = 0;
        task.running = false;
        renderTasks();
      }
    }

    function editTask(id) {
      const task = tasks.find(t => t.id === id);
      if (task) {
        const newName = prompt("Edit task name:", task.name);
        const newMinutes = parseInt(prompt("Edit duration (minutes):", task.duration / 60));
        if (newName && !isNaN(newMinutes) && newMinutes > 0) {
          task.name = newName;
          task.duration = newMinutes * 60;
          task.remaining = newMinutes * 60;
          task.elapsed = 0;
        }
        renderTasks();
      }
    }

    function deleteTask(id) {
      tasks = tasks.filter(t => t.id !== id);
      renderTasks();
    }
  </script>

</body>
</html>
